<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Cliente - Agência Marketing Digital</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; line-height: 1.5; }
        h1 { color: #1a1a1a; margin-bottom: 30px; text-align: center; }
        fieldset { margin-bottom: 25px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #fff; }
        legend { font-weight: bold; font-size: 1.3em; color: #0066cc; padding: 0 10px; }
        label { display: block; margin-top: 14px; font-weight: bold; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="url"],
        input[type="number"], textarea, select {
            width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;
        }
        .checkbox-group { margin-top: 10px; columns: 2; gap: 20px; }
        .checkbox-group label { font-weight: normal; display: block; margin: 8px 0; }
        .contacto-item { display: grid; grid-template-columns: 2fr 2fr 1fr 2fr 50px; gap: 10px; margin-bottom: 10px; align-items: end; }
        .contacto-item button { background: #c00; color: #fff; border: none; padding: 10px; border-radius: 4px; cursor: pointer; }
        .contrato-item { border: 2px dashed #0066cc; padding: 20px; margin-top: 20px; border-radius: 8px; position: relative; background: #f8fbff; }
        .remover { position: absolute; top: 10px; right: 10px; background: #c00; color: #fff; border: none; width: 32px; height: 32px; border-radius: 50%; font-size: 20px; cursor: pointer; }
        .add-btn { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-top: 15px; }
        .submit-btn { background: #0066cc; color: white; padding: 15px 40px; border: none; border-radius: 6px; font-size: 1.2em; cursor: pointer; margin-top: 20px; display: block; width: 300px; margin: 30px auto; }
        .hidden { display: none; }
        .detalhe-origem { margin-top: 15px; padding: 15px; background: #f0f8ff; border-radius: 6px; border: 1px solid #b0d4f1; }
    </style>
</head>
<body>

<h1>Cadastro de Novo Cliente – Agência de Marketing Digital</h1>

<form action="#" method="POST">

    <!-- INFORMAÇÕES GERAIS -->
    <fieldset>
        <legend>Informações Gerais</legend>

        <label for="status">Estado do Cliente</label>
        <select id="status" name="status" required>
            <option value="">-- Selecionar --</option>
            <option value="Ativo">Ativo</option>
            <option value="Inativo">Inativo</option>
            <option value="Lead">Lead</option>
            <option value="Em Negociação">Em Negociação</option>
            <option value="Suspenso">Suspenso</option>
        </select>

        <label for="data_entrada">Data de Entrada</label>
        <input type="date" id="data_entrada" name="data_entrada" required>

        <label for="gestor_principal">Gestor Principal do Cliente (na agência)</label>
        <select id="gestor_principal" name="gestor_principal" required>
            <option value="">-- Selecionar Gestor --</option>
            <option>João Silva</option>
            <option>Maria Santos</option>
            <option>Pedro Costa</option>
            <option>Ana Pereira</option>
            <option>Tiago Mendes</option>
            <option>Rita Oliveira</option>
            <option>Outros...</option>
        </select>
    </fieldset>

    <!-- DADOS DA EMPRESA -->
    <fieldset>
        <legend>Dados da Empresa</legend>

        <label for="nome_empresa">Nome da Marca / Empresa</label>
        <input type="text" id="nome_empresa" name="nome_empresa" required>

        <label for="nome_fiscal">Nome Fiscal</label>
        <input type="text" id="nome_fiscal" name="nome_fiscal" required>

        <label for="nif">NIF</label>
        <input type="text" id="nif" name="nif" maxlength="9" required>

        <label for="nome_dono">Nome do Dono / Sócio Principal</label>
        <input type="text" id="nome_dono" name="nome_dono">

        <label for="email_dono">Email do Dono</label>
        <input type="email" id="email_dono" name="email_dono">

        <label for="telefone_dono">Telemóvel do Dono</label>
        <input type="tel" id="telefone_dono" name="telefone_dono">

        <label for="pessoa_contacto">Pessoa de Contacto Principal</label>
        <input type="text" id="pessoa_contacto" name="pessoa_contacto" required>

        <label for="telefone_principal">Telemóvel Principal</label>
        <input type="tel" id="telefone_principal" name="telefone_principal" required>

        <label for="email_principal">Email Principal</label>
        <input type="email" id="email_principal" name="email_principal" required>

        <!-- Contactos de Gestão Adicionais -->
        <label>Contactos de Gestão / Outros Departamentos</label>
        <div id="contactos-gestao">
            <div class="contacto-item">
                <input type="text" name="contacto_nome[]" placeholder="Nome">
                <input type="text" name="contacto_cargo[]" placeholder="Cargo">
                <input type="tel" name="contacto_telefone[]" placeholder="Telemóvel">
                <input type="email" name="contacto_email[]" placeholder="Email">
                <button type="button" onclick="this.parentElement.remove()">×</button>
            </div>
        </div>
        <button type="button" class="add-btn" onclick="adicionarContacto()">+ Adicionar Contacto</button>

        <label for="website">URL do Website</label>
        <input type="url" id="website" name="website">

        <label for="shop">URL da Loja Online</label>
        <input type="url" id="shop" name="shop">

        <label for="morada">Morada Completa</label>
        <input type="text" id="morada" name="morada">

        <label for="setor">Setor de Atividade</label>
        <select id="setor" name="setor">
            <option value="">-- Selecionar --</option>
            <option>E-commerce</option>
            <option>Serviços</option>
            <option>Saúde e Bem-Estar</option>
            <option>Imobiliário</option>
            <option>Restauração</option>
            <option>Moda</option>
            <option>Formação</option>
            <option>Tecnologia</option>
            <option>Outro</option>
        </select>
    </fieldset>

    <!-- ORIGEM DO CLIENTE (NOVA LÓGICA AVANÇADA) -->
    <fieldset>
        <legend>Origem do Cliente</legend>

        <label for="origem">Origem do Lead</label>
        <select id="origem" name="origem" onchange="atualizarDetalhesOrigem()" required>
            <option value="">-- Selecionar Origem --</option>
            <option value="google_ads">Google Ads</option>
            <option value="meta_ads">Meta Ads (Facebook/Instagram)</option>
            <option value="tiktok_ads">TikTok Ads</option>
            <option value="linkedin">LinkedIn</option>
            <option value="site_agencia">Site da Agência</option>
            <option value="email_marketing">Email Marketing</option>
            <option value="feira_evento">Feira / Evento</option>
            <option value="parceria">Parceria</option>
            <option value="indicacao">Indicação</option>
            <option value="outro">Outro</option>
        </select>

        <div id="detalhes-origem" class="detalhe-origem hidden"></div>
    </fieldset>

    <!-- CONTRATOS (MÚLTIPLOS) -->
    <fieldset>
        <legend>Contratos</legend>
        <div id="contratos-container">
            <!-- Primeiro contrato -->
            <div class="contrato-item">
                <button type="button" class="remover" onclick="this.parentElement.remove()">×</button>

                <label>Início do Contrato</label>
                <input type="date" name="contrato_inicio[]" required>

                <label>Fim do Contrato (deixe vazio se indeterminado)</label>
                <input type="date" name="contrato_fim[]">

                <label>Tipo de Cobrança</label>
                <select name="contrato_cobranca[]" required>
                    <option value="mensal">Mensal</option>
                    <option value="trimestral">Trimestral</option>
                    <option value="semestral">Semestral</option>
                    <option value="anual">Anual</option>
                    <option value="unico">Pagamento Único</option>
                </select>

                <label>Valor do Contrato (€)</label>
                <input type="number" step="0.01" name="contrato_valor[]" required>

                <label>Serviços Incluídos neste Contrato</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Gestão Meta Ads"> Gestão Meta Ads</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Gestão Google Ads"> Gestão Google Ads</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Gestão TikTok Ads"> Gestão TikTok Ads</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Produção Vídeo/Foto"> Produção Vídeo/Foto</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Design Gráfico"> Design Gráfico</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Email Marketing"> Email Marketing</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="SEO"> SEO</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Gestão Redes Sociais"> Gestão Orgânica Redes Sociais</label>
                    <label><input type="checkbox" name="contrato_servicos[0][]" value="Criação Website"> Criação/Manutenção Website</label>
                </div>

                <label>Departamentos Envolvidos neste Contrato</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="contrato_departamentos[0][]" value="Marketing"> Marketing</label>
                    <label><input type="checkbox" name="contrato_departamentos[0][]" value="TI"> TI / Desenvolvimento</label>
                    <label><input type="checkbox" name="contrato_departamentos[0][]" value="Design"> Design</label>
                    <label><input type="checkbox" name="contrato_departamentos[0][]" value="Vídeo"> Vídeo / Foto</label>
                    <label><input type="checkbox" name="contrato_departamentos[0][]" value="Gestão"> Gestão / Atendimento</label>
                    <label><input type="checkbox" name="contrato_departamentos[0][]" value="Performance"> Performance</label>
                </div>
            </div>
        </div>
        <button type="button" class="add-btn" onclick="adicionarContrato()">+ Adicionar Novo Contrato</button>
    </fieldset>

    <!-- OBSERVAÇÕES -->
    <fieldset>
        <legend>Observações e Notas Internas</legend>
        <textarea name="observacoes" rows="6" placeholder="Objetivos do cliente, concorrência, informações importantes, histórico..."></textarea>
    </fieldset>

    <button type="submit" class="submit-btn">Guardar Cliente</button>
</form>

<script>
    let contratoIndex = 1;

    // Adicionar contacto de gestão
    function adicionarContacto() {
        const container = document.getElementById('contactos-gestao');
        const novo = document.createElement('div');
        novo.className = 'contacto-item';
        novo.innerHTML = `
        <input type="text" name="contacto_nome[]" placeholder="Nome">
        <input type="text" name="contacto_cargo[]" placeholder="Cargo">
        <input type="tel" name="contacto_telefone[]" placeholder="Telemóvel">
        <input type="email" name="contacto_email[]" placeholder="Email">
        <button type="button" onclick="this.parentElement.remove()">×</button>
    `;
        container.appendChild(novo);
    }

    // Adicionar novo contrato
    function adicionarContrato() {
        const container = document.getElementById('contratos-container');
        const novo = document.createElement('div');
        novo.className = 'contrato-item';
        novo.innerHTML = `
        <button type="button" class="remover" onclick="this.parentElement.remove()">×</button>

        <label>Início do Contrato</label>
        <input type="date" name="contrato_inicio[]" required>

        <label>Fim do Contrato</label>
        <input type="date" name="contrato_fim[]">

        <label>Tipo de Cobrança</label>
        <select name="contrato_cobranca[]" required>
            <option value="mensal">Mensal</option>
            <option value="trimestral">Trimestral</option>
            <option value="semestral">Semestral</option>
            <option value="anual">Anual</option>
            <option value="unico">Pagamento Único</option>
        </select>

        <label>Valor do Contrato (€)</label>
        <input type="number" step="0.01" name="contrato_valor[]" required>

        <label>Serviços Incluídos neste Contrato</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Gestão Meta Ads"> Gestão Meta Ads</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Gestão Google Ads"> Gestão Google Ads</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Gestão TikTok Ads"> Gestão TikTok Ads</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Produção Vídeo/Foto"> Produção Vídeo/Foto</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Design Gráfico"> Design Gráfico</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Email Marketing"> Email Marketing</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="SEO"> SEO</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Gestão Redes Sociais"> Gestão Orgânica Redes Sociais</label>
            <label><input type="checkbox" name="contrato_servicos[${contratoIndex}][]" value="Criação Website"> Criação/Manutenção Website</label>
        </div>

        <label>Departamentos Envolvidos neste Contrato</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="contrato_departamentos[${contratoIndex}][]" value="Marketing"> Marketing</label>
            <label><input type="checkbox" name="contrato_departamentos[${contratoIndex}][]" value="TI"> TI / Desenvolvimento</label>
            <label><input type="checkbox" name="contrato_departamentos[${contratoIndex}][]" value="Design"> Design</label>
            <label><input type="checkbox" name="contrato_departamentos[${contratoIndex}][]" value="Vídeo"> Vídeo / Foto</label>
            <label><input type="checkbox" name="contrato_departamentos[${contratoIndex}][]" value="Gestão"> Gestão / Atendimento</label>
            <label><input type="checkbox" name="contrato_departamentos[${contratoIndex}][]" value="Performance"> Performance</label>
        </div>
    `;
        container.appendChild(novo);
        contratoIndex++;
    }

    // Lógica completa da Origem do Cliente
    function atualizarDetalhesOrigem() {
        const origem = document.getElementById('origem').value;
        const container = document.getElementById('detalhes-origem');
        container.innerHTML = '';
        container.classList.add('hidden');

        let html = '';

        if (origem === 'indicacao') {
            html = `
            <label>Indicação Interna (funcionário da agência)</label>
            <select name="origem_indicacao_interna">
                <option value="">-- Nenhum --</option>
                <option>João Silva</option>
                <option>Maria Santos</option>
                <option>Pedro Costa</option>
                <option>Ana Pereira</option>
                <option>Tiago Mendes</option>
                <option>Rita Oliveira</option>
            </select>
            <label>Indicação Externa (pessoa/empresa)</label>
            <input type="text" name="origem_indicacao_externa" placeholder="Ex: amigo do cliente, antigo fornecedor...">
        `;

        } else if (origem === 'parceria') {
            html = `
            <label>Parceiro da Nossa Rede</label>
            <select name="origem_parceiro_interno">
                <option value="">-- Selecionar Parceiro --</option>
                <option>Webnaparo</option>
                <option>Digital Minds</option>
                <option>Agência X</option>
                <option>Freelancer João</option>
                <option>Studio Criativo</option>
            </select>
            <label>Parceiro Externo (nome da entidade)</label>
            <input type="text" name="origem_parceiro_externo" placeholder="Ex: empresa que passou o contacto">
        `;

        } else if (origem === 'feira_evento') {
            html = `
            <label>Evento Conhecido</label>
            <select name="origem_evento_interno">
                <option value="">-- Selecionar Evento --</option>
                <option>Web Summit 2025</option>
                <option>Portugal Digital Summit</option>
                <option>Feira do Empreendedor</option>
                <option>E-commerce Day</option>
                <option>Workshop Interno</option>
            </select>
            <label>Nome do Evento / Detalhe</label>
            <input type="text" name="origem_evento_externo" placeholder="Ex: stand na feira X, palestra no ISEG...">
        `;

        } else if (origem && origem !== '') {
            // Para todas as outras origens (Google, Meta, Site, etc.) e "Outro"
            html = `
            <label>Detalhe da Origem</label>
            <input type="text" name="origem_detalhe" placeholder="Ex: campanha Verão 2025, formulário do site, anúncio específico...">
        `;
        }

        if (html) {
            container.innerHTML = html;
            container.classList.remove('hidden');
        }
    }

    // Executar ao carregar a página
    window.onload = function() {
        atualizarDetalhesOrigem();
    };
</script>

</body>
</html>